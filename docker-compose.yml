version: '3'
services:
  postgres:
    container_name: migrator_pg
    image: postgres
    ports:
      - "5432:5432"
    environment:
      POSTGRES_DB: postgre_db
      POSTGRES_USER: admin
      POSTGRES_PASSWORD: admin
  mongo:
    container_name: migrator_mg
    image: mongo
    volumes:
      - ./docker/data1:/data/db
      - ./docker/rs-init.sh:/scripts/rs-init.sh
    environment:
      MONGO_INITDB_ROOT_USERNAME: admin
      MONGO_INITDB_ROOT_PASSWORD: password
    entrypoint: [ "/usr/bin/mongod", "--bind_ip_all", "--replSet", "demo" ]
    ports:
      - "27017:27017"
  mongo-express:
    image: mongo-express
    container_name: migrator_mge
    ports:
      - "8081:8081"
    environment:
      ME_CONFIG_MONGODB_ADMINUSERNAME: admin
      ME_CONFIG_MONGODB_ADMINPASSWORD: password
      ME_CONFIG_MONGODB_URL: mongodb://admin:password@mongo:27017/
#  zookeeper:
#    image: wurstmeister/zookeeper:latest
#    ports:
#      - "2181:2181"
#  kafka:
#    image: wurstmeister/kafka:latest
#    ports:
#      - "9092:9092"
#    environment:
#      - KAFKA_ADVERTISED_HOST_NAME=kafka
#      - KAFKA_ADVERTISED_PORT=9092
#      - KAFKA_ZOOKEEPER_CONNECT=zookeeper:2181
#      - KAFKA_CREATE_TOPICS=dresses:1:1,ratings:1:1
#    volumes:
#      - "/var/run/docker.sock:/var/run/docker.sock"
#    depends_on:
#      - zookeeper